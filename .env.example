# OSS Search Infrastructure Environment Variables
# Copy this file to .env and update with your values

# ============================================
# SearXNG Configuration
# ============================================
# Generate with: openssl rand -hex 32
SEARXNG_SECRET=changeme_generate_a_secure_random_string

# ============================================
# Database Configuration
# ============================================
# PostgreSQL password
# Generate with: openssl rand -hex 16
DB_PASSWORD=changeme_generate_a_secure_password

# Database settings
POSTGRES_DB=search_analytics
POSTGRES_USER=searchuser

# ============================================
# Cache Configuration
# ============================================
# Search results cache TTL (in seconds)
# Default: 3600 (1 hour)
CACHE_TTL_SEARCH=3600

# Crawl results cache TTL (in seconds)
# Default: 86400 (24 hours)
CACHE_TTL_CRAWL=86400

# Redis max memory (for docker-compose)
REDIS_MAX_MEMORY=512mb

# ============================================
# MCP Server Configuration
# ============================================
# Node environment (development|production)
NODE_ENV=production

# Logging level (debug|info|warn|error)
LOG_LEVEL=info

# Server port
PORT=3000

# ============================================
# Service URLs (Internal Docker Network)
# ============================================
# These are used by the MCP server to connect to other services
SEARXNG_URL=http://searxng:8080
CRAWL4AI_URL=http://crawl4ai:8000
REDIS_URL=redis://redis:6379

# ============================================
# Crawl4AI Configuration
# ============================================
# Maximum concurrent crawls
MAX_CONCURRENT_CRAWLS=5

# Default timeout for crawls (seconds)
DEFAULT_TIMEOUT=30

# Playwright browser path
PLAYWRIGHT_BROWSERS_PATH=/ms-playwright

# ============================================
# External Service URLs (if exposing services)
# ============================================
# Public URLs for external access (optional)
# PUBLIC_SEARXNG_URL=https://search.yourdomain.com
# PUBLIC_MCP_URL=https://mcp.yourdomain.com

# ============================================
# SSL/TLS Configuration (for Nginx)
# ============================================
# SSL certificate paths (if using HTTPS)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ============================================
# Optional: API Authentication
# ============================================
# If you want to add API key authentication to MCP server
# API_KEY=your-api-key-here
# REQUIRE_AUTH=false

# ============================================
# Optional: Monitoring
# ============================================
# Enable Prometheus metrics
# ENABLE_METRICS=true
# METRICS_PORT=9090

# Enable debug mode
# DEBUG=false

# ============================================
# Kubernetes Specific (if deploying to k8s)
# ============================================
# Namespace
# K8S_NAMESPACE=search-infrastructure

# Image registry
# IMAGE_REGISTRY=your-registry.io
# IMAGE_TAG=latest

# Storage class
# STORAGE_CLASS=standard

# ============================================
# Rate Limiting (SearXNG)
# ============================================
# Requests per minute per IP
# RATE_LIMIT_PER_MINUTE=20

# Burst protection
# RATE_LIMIT_BURST=10

# ============================================
# Advanced Configuration
# ============================================
# Enable analytics
# ENABLE_ANALYTICS=true

# Analytics retention days
# ANALYTICS_RETENTION_DAYS=30

# Enable request logging
# ENABLE_REQUEST_LOGGING=false

# ============================================
# NOTES:
# ============================================
# 1. Never commit the .env file to version control
# 2. Use strong, randomly generated secrets
# 3. Different secrets for development and production
# 4. Rotate secrets periodically
# 5. Use a secrets manager in production (e.g., Vault, AWS Secrets Manager)
