apiVersion: v1
kind: ConfigMap
metadata:
  name: searxng-limiter
  namespace: search-infrastructure
data:
  limiter.toml: |
    [botdetection]
    ipv4_prefix = 32
    ipv6_prefix = 48
    trusted_proxies = [
      '127.0.0.0/8',
      '::1',
      '10.0.0.0/8',
      '172.16.0.0/12',
      '192.168.0.0/16',
      'fd00::/8',
    ]

    [botdetection.ip_limit]
    filter_link_local = true
    link_token = false

    [botdetection.ip_lists]
    block_ip = []
    pass_ip = [
      '10.0.0.0/8',
      '172.16.0.0/12',
      '192.168.0.0/16',
      '127.0.0.0/8',
      '::1',
      'fd00::/8',
      'fe80::/10',
    ]
    pass_searxng_org = true
